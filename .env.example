# TazoSploit SaaS v2 - Environment Configuration
# Copy to .env and fill in your values

# =============================================================================
# DATABASE
# =============================================================================
DB_PASSWORD=tazosploit_dev
DATABASE_URL=postgresql+asyncpg://tazosploit:tazosploit_dev@postgres:5432/tazosploit

# =============================================================================
# REDIS
# =============================================================================
REDIS_URL=redis://redis:6379/0

# =============================================================================
# SECURITY
# =============================================================================
SECRET_KEY=change-this-to-a-secure-random-string-in-production
ENVIRONMENT=development

# =============================================================================
# LLM CONFIGURATION
# =============================================================================
# SaaS owner (global LLM settings owner)
# SAAS_OWNER_TENANT_ID=a0000000-0000-0000-0000-000000000001
# SAAS_OWNER_EMAIL=admin@tazosploit.local

# For development with LM Studio
LLM_PROVIDER=lm-studio
LLM_API_BASE=http://host.docker.internal:1234/v1
LLM_MODEL=openai/gpt-oss-120b
LLM_CONTEXT_WINDOW=8000
LLM_MAX_TOKENS=4096

# LLM Response Budgeting (token and quality control)
LLM_MAX_COMPLETION_TOKENS=1024
LLM_MIN_COMPLETION_TOKENS=256
LLM_TEMPERATURE=0.3

# For production with Claude API
# LLM_PROVIDER=claude
# ANTHROPIC_API_KEY=your-anthropic-api-key
# CLAUDE_API_KEY=your-anthropic-api-key

# For Zhipu GLM (remote)
# LLM_API_BASE=https://api.z.ai/api/coding/paas/v4
# LLM_MODEL=glm-4.7
# ZHIPU_API_KEY=your-zhipu-api-key

# Internal LLM proxy (recommended for production)
# LLM_PROXY_TOKEN=oc_llm_proxy_change_me
# LLM_PROXY_TIMEOUT_SECONDS=240
# LLM_PROXY_RETRY_MAX=6
# LLM_HARD_TIMEOUT_SECONDS=300
# LLM_CONNECT_TIMEOUT_SECONDS=20
# LLM_READ_TIMEOUT_SECONDS=240
# LLM_RETRY_MAX=6
# LLM_RETRY_BASE_SECONDS=2
# LLM_THINKING_LEVEL=off
# MAX_CONTEXT_MESSAGES=60
# MAX_CONTEXT_CHARS=20000

# =============================================================================
# EXECUTION LIMITS
# =============================================================================
MAX_CONCURRENT_JOBS=10
DEFAULT_JOB_TIMEOUT=3600

# =============================================================================
# SCOPE & RECON GUARDS
# =============================================================================
ALLOW_FULL_PORT_SCAN=false
ALLOW_MULTI_TARGET_SCAN=false
ALLOW_COMMAND_CHAINING=false
ALLOW_MULTI_BLOCKS=false
RECON_BASELINE_TOP_PORTS=200

# =============================================================================
# OUTPUT LIMITS (Token Savings)
# =============================================================================
MAX_STDOUT_CHARS=1200
MAX_STDERR_CHARS=600
MAX_FEEDBACK_CHARS=2200

# =============================================================================
# OBSERVABILITY
# =============================================================================
LOG_LEVEL=DEBUG
ENABLE_FULL_LOGGING=true
LOG_DIR=/app/logs

# =============================================================================
# GRAFANA (optional)
# =============================================================================
GRAFANA_PASSWORD=admin

# =============================================================================
# CORS (for frontend)
# =============================================================================
CORS_ORIGINS=http://localhost:3000,http://localhost:3001
ALLOW_SELF_REGISTRATION=false

# =============================================================================
# SELF-IMPROVEMENT LOOP (optional)
# =============================================================================
# CONTROL_PLANE_URL=http://localhost:8000
# BENCHMARK_TARGETS=dvwa
# BENCHMARK_PHASE=FULL
# BENCHMARK_TARGET_TYPE=lab
# BENCHMARK_EXPLOIT_MODE=autonomous
# BENCHMARK_TIMEOUT=10800
# BENCHMARK_MAX_ITERATIONS=120
# BENCHMARK_SCORE_DELTA=0.0
# MEMORY_PROMOTION_MODE=reflect

# =============================================================================
# EXPLOIT ESCALATION (optional)
# =============================================================================
# AUTO_ESCALATE_RECON=true
# ALLOW_EXPLOIT_ANY_PHASE=true
# PREVENT_RECON_ARTIFACT_REWRITES=true
# RECON_ARTIFACT_REWRITE_COOLDOWN_SECS=1800
# ENFORCE_EXPLOITATION_PROOF=true
# EXPLOITATION_PROOF_MAX_ATTEMPTS_PER_VULN=5
# EXPLOITATION_PROOF_FAIL_MODE=skip
